"use strict";(self.webpackChunkcode_docs=self.webpackChunkcode_docs||[]).push([[4952],{8247:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>C,contentTitle:()=>v,default:()=>T,frontMatter:()=>_,metadata:()=>f,toc:()=>N});var a=n(3117),r=n(7294),i=n(3905),o=n(628);const l="accordion__root_fymv",s="accordion__item_IYw4",p="accordion__header_KXyP",c="accordion__trigger_VuQc",d="accordion__header__text_U9Wk",m="accordion__icon__expand_pyP_",u="accordion__content_Foyi",h="accordion__content__text_fe0b",g=e=>{let{id:t,header:n,children:a}=e;return r.createElement(r.Fragment,null,r.createElement(o.ck,{value:t,className:s},r.createElement(o._m,{className:p},r.createElement(o.o4,{className:c},r.createElement("div",{className:d},n),r.createElement("div",{className:m,"aria-hidden":!0},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}))))),r.createElement(o.vF,{className:u},r.createElement("div",{className:h},a))))},k=e=>{let{children:t}=e;return r.createElement(r.Fragment,null,r.createElement(o.fC,{type:"multiple",defaultValue:["item-1"],className:l},t))};var y=n(614);const _={sidebar_position:1},v="Create GraphQL server with Strapi",f={unversionedId:"graphql/With Strapi",id:"graphql/With Strapi",title:"Create GraphQL server with Strapi",description:"Reference 1,",source:"@site/docs/graphql/With Strapi.mdx",sourceDirName:"graphql",slug:"/graphql/With Strapi",permalink:"/second-documentation/docs/graphql/With Strapi",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"GraphQL",permalink:"/second-documentation/docs/category/graphql"},next:{title:"Tutorial Intro",permalink:"/second-documentation/docs/intro"}},C={},N=[{value:"Install GraphQL plugins tr\xean Strapi",id:"install-graphql-plugins-tr\xean-strapi",level:2},{value:"CRUD",id:"crud",level:2},{value:"Custom GraphQL endpoint",id:"custom-graphql-endpoint",level:2}],b={toc:N},q="wrapper";function T(e){let{components:t,...n}=e;return(0,i.kt)(q,(0,a.Z)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"create-graphql-server-with-strapi"},"Create GraphQL server with Strapi"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},(0,i.kt)("a",{parentName:"em",href:"https://strapi.io/blog/extending-and-building-custom-resolvers-with-strapi-v4"},"Reference 1")),",\n",(0,i.kt)("em",{parentName:"p"},(0,i.kt)("a",{parentName:"em",href:"https://strapi.io/blog/a-deep-dive-into-strapi-graph-ql"},"Reference 2"))),(0,i.kt)("h2",{id:"install-graphql-plugins-tr\xean-strapi"},"Install GraphQL plugins tr\xean Strapi"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"yarn strapi install graphql\n")),(0,i.kt)("h2",{id:"crud"},"CRUD"),(0,i.kt)("p",null,"GraphQL tr\xean Strapi \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u h\xf3a v\u1edbi schema JSON c\xf3 s\u1eb5n, cho ph\xe9p ta th\u1ef1c hi\u1ec7n CRUD tr\u1ef1c ti\u1ebfp tr\xean graphql (B\u1eadt permission public !!!)"),(0,i.kt)(k,{mdxType:"Accordion"},(0,i.kt)(g,{id:"item-1",header:"Fetch all instances",mdxType:"AccordionComponentItem"},(0,i.kt)(y.Z,{language:"graphql",title:"Fetch all instances",mdxType:"CodeBlock"},"\nquery {\n  blogs {\n    data {\n      id\n      attributes {\n        Date\n        Title\n        Body\n      }\n    }\n  }\n}\n      ")),(0,i.kt)(g,{id:"item-2",header:"Fetch one instance",mdxType:"AccordionComponentItem"},(0,i.kt)(y.Z,{language:"graphql",title:"Fetch one instance",mdxType:"CodeBlock"},'\nquery {\n  blog(id: "1") {\n    data {\n      attributes {\n        Date\n        Title\n        Body\n      }\n    }\n  }\n}')),(0,i.kt)(g,{id:"item-3",header:"Create instance",mdxType:"AccordionComponentItem"},(0,i.kt)(y.Z,{language:"graphql",title:"Create instance",mdxType:"CodeBlock"},'\nmutation blogs {\n  createBlog(\n    data: {\n      Title: "Fifth Post"\n      Body: " This is the fifth blog post. It  was created using a graphQl mutaiton from the strapi graphql playground"\n    }\n  ) {\n    data {\n      attributes {\n        Title\n      }\n    }\n  }\n}\n')),(0,i.kt)(g,{id:"item-4",header:"Update instance",mdxType:"AccordionComponentItem"},(0,i.kt)(y.Z,{language:"graphql",title:"Update instance",mdxType:"CodeBlock"},'\nmutation blogs {\n  updateBlog(\n    id: "7"\n    data: {\n      Title: "Fifth Post"\n      Body: " This is the fifth blog post. It  was created using a graphQl mutaiton from the strapi graphql playground"\n    }\n  ) {\n    data {\n      attributes {\n        Title\n      }\n    }\n  }\n}\n')),(0,i.kt)(g,{id:"item-5",header:"Delete instance",mdxType:"AccordionComponentItem"},(0,i.kt)(y.Z,{language:"graphql",title:"Delete instance",mdxType:"CodeBlock"},'\nmutation {\n  deleteBlog(id: "5") {\n    data {\n      attributes {\n        Title\n      }\n    }\n  }\n}\n'))),(0,i.kt)("h2",{id:"custom-graphql-endpoint"},"Custom GraphQL endpoint"),(0,i.kt)("p",null,"C\xe1c ph\u01b0\u01a1ng th\u1ee9c m\u1edbi c\u1ee7a GraphQL plugins trong Strapi \u0111\u1ec1u \u0111c \u0111\u1eb7t t\u1ea1i register, tr\u01b0\u1edbc khi App b\u1eaft \u0111\u1ea7u v\xf2ng \u0111\u1eddi"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'register({ strapi }) {\n  const extensionService = strapi.service("plugin::graphql.extension");\n\n  extensionService.use(({ strapi }) => ({\n    typeDefs: ``,\n    resolvers: {},\n    resolversConfig: {},\n    })\n  );\n}\n')),(0,i.kt)("p",null,"T\u1ea1o Query endpoint b\xean trong ",(0,i.kt)("inlineCode",{parentName:"p"},"typeDefs"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"typeDefs: `\n  type Query {\n    _QueryName_(some_param: String!): ReturnSchema\n  }\n\n  type ReturnSchema {\n    id: ID\n    name: String\n  }\n`;\n")),(0,i.kt)("p",null,"Vi\u1ebft logic (",(0,i.kt)("inlineCode",{parentName:"p"},"resolver"),") cho endpoint:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"resolvers: {\n  Query: {\n    _QueryName_: {\n      resolve: async (parent, args, context) => {\n        // m\u1ecdi params trong Query trong `args`\n        const data = await strapi.some_logic(args.some_params);\n        return {\n          id: data.id,\n          name: data.name,\n        };\n      };\n    }\n  }\n}\n")),(0,i.kt)("p",null,"C\u1ea5p quy\u1ec1n cho endpoint ch\u1ea1y public (ho\u1eb7c y\xeau c\u1ea7u JWT)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'resolversConfig: {\n  "Query._QueryName_": {\n    auth: false,\n  },\n},\n')))}T.isMDXComponent=!0}}]);